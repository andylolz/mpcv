{% extends "layout.html" %}
{% import 'subscribe.html' as subscribe %}
{% block title %} {{ constituency.name }} candidates {% endblock %}

{% block wide %}

    {% if show_subscribe and not email_got and postcode %}
        {{ subscribe.subscribe(show_dismiss=True, from_email=from_email, postcode=postcode) }}
    {% endif %}

    <div class="candidates">
        <h1> {{ constituency.name }} candidates </h1>

        <div class="row cvblock">
             {% for candidate in candidates_have_cv %}
                 <div class="col-xs-6 col-sm-4 col-md-3 candidate">
                     <span class="name">{{ candidate.name }}</span> <br> <span class="party">{{ candidate.party}}</span>
                     {% import 'embed_cv.html' as embed_cv %}
                     {{ embed_cv.embed_cv(candidate.cv) }}
                 </div>            
             {% endfor %}
             {% for candidate in candidates_no_cv %}
                 <div class="col-xs-6 col-sm-4 col-md-3 candidate">
                     <span class="name">{{ candidate.name }}</span> <br> <span class="party">{{ candidate.party}}</span>
                     {% import 'embed_cv.html' as embed_cv %}
                     {{ embed_cv.embed_non_cv("/static/not-submitted-their-cv.png", "/upload_cv/" ~ candidate.id) }}
                 </div>            
             {% endfor %}
             {% for candidate in candidates_no_email %}
                 <div class="col-xs-6 col-sm-4 col-md-3 candidate">
                     <span class="name">{{ candidate.name }}</span> <br> <span class="party">{{ candidate.party}}</span>
                     {% import 'embed_cv.html' as embed_cv %}
                     {{ embed_cv.embed_non_cv("/static/not-submitted-their-cv.png", "/upload_cv/" ~ candidate.id) }}
                 </div>            
             {% endfor %}
        </div>

        {% if candidates_no_cv or candidates_no_email %}
            <h1>Good news! You can help get more CVs!</h1>
            <p class="askblock">
                {% if candidates_no_cv %}
                    <a href="/email_candidates/{{ constituency.id }}" class="contact-ask btn btn-lg btn-success">Email candidates without CVs</a>
                    {% if show_twitter_button %}
                    &nbsp;
                    <a href="/tweet_candidates/{{ constituency.id }}" class="contact-ask btn btn-lg btn-info">Tweet them</a>
                    {% endif %}
                    &nbsp;
                {% endif %}
                {% if candidates_no_email %}
                        <a href="https://yournextmp.com/constituency/{{ constituency.id }}/" class="contact-ask btn btn-lg btn-default" target="_blank">Find missing emails</a>
                {% endif %}
            </p>
        {% endif %}

<!--        {% if not email_got and postcode %}
            {% if not candidates_have_cv %}
               <h1>We can email you when we get CVs</h1>
            {% else %}
               <h1>We can email you when we get more CVs</h1>
            {% endif %}
            {{ subscribe.subscribe(show_dismiss=False, from_email=from_email, postcode=postcode) }}
            {% endif %} -->

    </div>

{% endblock %}

